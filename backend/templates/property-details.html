{{ template "header" . }}

<style>
    /* --- GALLERY STYLES --- */
    .gallery-container {
        position: relative;
        width: 100%;
        max-width: 1200px;
        margin: 0 auto 40px;
        border-radius: 20px;
        overflow: hidden;
    }

    /* Main "Hero" Image */
    .main-stage {
        height: 60vh; /* Takes up 60% of screen height */
        min-height: 400px;
        width: 100%;
        background: #000;
        position: relative;
    }
    .main-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0;
        transition: opacity 0.4s ease; /* Smooth fade effect */
    }
    .main-img.loaded { opacity: 1; }

    /* Thumbnail Strip */
    .thumb-strip {
        display: flex;
        gap: 15px;
        padding: 20px 0;
        overflow-x: auto; /* Scroll sideways on mobile */
        scroll-behavior: smooth;
    }
    .thumb-btn {
        width: 120px;
        height: 80px;
        border-radius: 12px;
        overflow: hidden;
        cursor: pointer;
        opacity: 0.6;
        transition: 0.3s;
        border: 2px solid transparent;
        flex-shrink: 0; /* Prevents squishing */
    }
    .thumb-btn:hover, .thumb-btn.active {
        opacity: 1;
        border-color: #0f172a;
        transform: translateY(-3px);
    }
    .thumb-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    /* --- EXISTING STYLES (Layout) --- */
    .details-wrapper {
        padding: 0 10% 100px;
        max-width: 1400px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: 2fr 1fr; /* 2/3 Content, 1/3 Sidebar */
        gap: 60px;
    }

    .prop-info h1 { font-size: 42px; font-weight: 300; margin-bottom: 10px; color: #0f172a; }
    .prop-loc { font-size: 16px; color: #64748b; margin-bottom: 30px; display: block; text-transform: uppercase; letter-spacing: 1px; }

    .specs-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        margin-bottom: 40px;
        background: #f8fafc;
        padding: 30px;
        border-radius: 20px;
    }
    .spec-item h4 { font-size: 12px; color: #64748b; text-transform: uppercase; margin-bottom: 5px; }
    .spec-item p { font-size: 18px; font-weight: 600; color: #0f172a; }

    .desc-box { font-size: 16px; line-height: 1.8; color: #334155; margin-bottom: 40px; }
    .desc-box strong { color: #0f172a; font-weight: 700; }

    /* Sidebar (Price & Contact) */
    .sidebar { position: sticky; top: 120px; height: fit-content; }
    .price-card {
        background: #ffffff;
        border: 1px solid #e2e8f0;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.05);
        text-align: center;
    }
    .price-tag { font-size: 32px; font-weight: 700; color: #0f172a; display: block; margin-bottom: 10px; }
    .price-sub { font-size: 14px; color: #64748b; display: block; margin-bottom: 30px; }
    
    .action-btn {
        display: block;
        width: 100%;
        padding: 15px;
        background: #0f172a;
        color: white;
        text-decoration: none;
        border-radius: 10px;
        font-weight: 600;
        margin-bottom: 15px;
        transition: 0.3s;
        border: none;
        cursor: pointer;
    }
    .action-btn:hover { background: #2563eb; transform: translateY(-3px); }
    .action-btn.secondary { background: white; border: 1px solid #cbd5e1; color: #0f172a; }
    .action-btn.secondary:hover { border-color: #0f172a; background: #f8fafc; }

    /* Mobile Fixes */
    @media (max-width: 900px) {
        .details-wrapper { grid-template-columns: 1fr; padding: 0 5% 60px; }
        .main-stage { height: 40vh; }
        .prop-info h1 { font-size: 32px; }
        .sidebar { position: relative; top: 0; margin-top: 40px; }
    }
</style>

<div style="padding-top: 100px;"></div> <div class="gallery-container">
    <div class="main-stage">
        {{ if .Prop.Images }}
            <img src="{{ index .Prop.Images 0 }}" id="mainImage" class="main-img loaded" alt="Main View">
        {{ else }}
            <img src="/images/placeholder.jpg" class="main-img loaded" alt="No Image">
        {{ end }}
    </div>
    
    <div class="thumb-strip" style="padding: 20px 10%;">
        {{ range $i, $img := .Prop.Images }}
            <div class="thumb-btn {{ if eq $i 0 }}active{{ end }}" onclick="changeImage('{{ $img }}', this)">
                <img src="{{ $img }}" class="thumb-img" alt="View {{ $i }}">
            </div>
        {{ end }}
    </div>
</div>

<div class="details-wrapper">
    <div class="prop-info">
        <h1>{{ .Prop.Name }}</h1>
        <span class="prop-loc">üìç {{ .Prop.Location }}</span>

        <div class="specs-grid">
            <div class="spec-item">
                <h4>Configuration</h4>
                <p>{{ .Prop.Config }}</p>
            </div>
            <div class="spec-item">
                <h4>Floor / Height</h4>
                <p>{{ .Prop.Floor }}</p>
            </div>
            <div class="spec-item">
                <h4>Possession</h4>
                <p>{{ .Prop.Possession }}</p>
            </div>
            <div class="spec-item">
                <h4>Status</h4>
                <p>{{ .Prop.Status }}</p>
            </div>
        </div>

        <div class="desc-box">
            {{ .Prop.Description | safeHTML }}
        </div>
    </div>

    <aside class="sidebar">
        <div class="price-card">
            <span class="price-tag">{{ .Prop.Price }}</span>
            <span class="price-sub">{{ .Prop.Category }} for {{ .Prop.Yield }}</span>

            <button onclick="openInquiryModal()" class="action-btn">Enquire Now</button>
            <a href="{{ .Prop.LocationURL }}" target="_blank" class="action-btn secondary">View on Map ‚Üó</a>
        </div>
    </aside>
</div>

<script>
    function changeImage(src, btn) {
        // 1. Fade out
        const main = document.getElementById('mainImage');
        main.style.opacity = '0';

        // 2. Wait 200ms, then swap and fade in
        setTimeout(() => {
            main.src = src;
            main.style.opacity = '1';
        }, 200);

        // 3. Update active button style
        document.querySelectorAll('.thumb-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    function openInquiryModal() {
        // Scroll to contact form or open a modal (depending on your preference)
        // For now, we smooth scroll to footer contact or home
        const confirm = window.confirm("Would you like to connect via WhatsApp for faster details?");
        if(confirm) {
            window.open("https://wa.me/919876543210?text=I am interested in {{ .Prop.Name }}", "_blank");
        }
    }
</script>

{{ template "footer" . }}